{{>header}}
<div class="addRecipeContainer">
    <div class="addRecipeDiv">
        <ul class="form-section page-section">
            <li id="cid_1" class="form-input-wide" data-type="control_head">
                <div class="form-header-group  header-large">
                    <div class="header-text httal htvam">
                        <h1 id="header_1" class="form-header" data-component="header">
                            Add a New recipe
                        </h1>
                    </div>
                </div>
            </li>
            <li class="form-line jf-required" data-type="control_textbox" id="id_9">
                <label class="form-label form-label-left form-label-auto" id="label_9" for="input_9">
                    Recipe title
                    <span class="form-required">
                        *
                    </span>
                </label>
                <div id="cid_9" class="form-input jf-required">
                    <input type="text" id="input_9" name="q9_recipeTitle" data-type="input-textbox"
                        class="form-textbox validate[required]" data-defaultvalue="" size="20" value=""
                        data-component="textbox" aria-labelledby="label_9" required="">
                </div>
            </li>
            <li class="form-line jf-required" data-type="control_textbox" id="id_10">
                <label class="form-label form-label-left form-label-auto" id="label_10" for="input_10">
                    Author name
                    <span class="form-required">
                        *
                    </span>
                </label>
                <div id="cid_10" class="form-input jf-required">
                    <input type="text" id="input_10" name="q10_authorName" data-type="input-textbox"
                        class="form-textbox validate[required]" data-defaultvalue="" size="20" value=""
                        data-component="textbox" aria-labelledby="label_10" required="">
                </div>
            </li>
            <li class="form-line" data-type="control_textarea" id="id_45">
                <label class="form-label form-label-left form-label-auto" id="label_45" for="input_45"> Description
                </label>
                <div id="cid_45" class="form-input">
                    <textarea id="input_45" class="form-textarea custom-hint-group form-custom-hint"
                        name="q45_preparationSteps" cols="40" rows="6" data-component="textarea"
                        aria-labelledby="label_45" data-customhint="comma separated or one per line" customhinted="true"
                        placeholder="comma separated or one per line" spellcheck="false"></textarea>
                </div>
            </li>

            <li class="form-line" data-type="control_textarea" id="id_11">
                <label class="form-label form-label-left form-label-auto" id="label_11" for="input_11"> Ingredient(s)
                </label>
                <div id="cid_11" class="form-input">
                    <textarea id="input_11" class="form-textarea custom-hint-group form-custom-hint"
                        name="q11_ingredients" cols="40" rows="6" data-component="textarea" aria-labelledby="label_11"
                        data-customhint="comma separated or one per line" customhinted="true"
                        placeholder="comma separated or one per line" spellcheck="false"></textarea>
                </div>
            </li>
            <li class="form-line" data-type="control_textarea" id="id_12">
                <label class="form-label form-label-left form-label-auto" id="label_12" for="input_12"> Image URL(s)
                </label>
                <div id="cid_12" class="form-input">
                    <textarea id="input_12" class="form-textarea custom-hint-group form-custom-hint"
                        name="q12_imageUrls" cols="40" rows="6" data-component="textarea" aria-labelledby="label_12"
                        data-customhint="comma separated or one per line" customhinted="true"
                        placeholder="comma separated or one per line" spellcheck="false"></textarea>
                </div>
            </li>
            <li class="form-line jf-required" data-type="control_textbox" id="id_13">
                <div class="twoColCont" style="display: flex; width:100%; gap:3em">
                    <div style="width:50%;">
                        <label class="form-label form-label-left form-label-auto" id="label_13" for="input_13">
                            Preparation time (in mins)
                            <span class="form-required">
                                *
                            </span>
                        </label>
                        <div id="cid_13" class="form-input jf-required">
                            <input type="text" id="input_13" style="width:100%" name="q13_preparationTimein"
                                data-type="input-textbox" class="form-textbox validate[required, Numeric]"
                                data-defaultvalue="" size="20" value="" data-component="textbox"
                                aria-labelledby="label_13" required="">
                        </div>
                    </div>
                    <div style="width:50%;">
                        <label class="form-label form-label-left form-label-auto" id="label_14" for="input_14">
                            Serves
                            <span class="form-required">
                                *
                            </span>
                        </label>
                        <div id="cid_14" class="form-input jf-required">
                            <input type="text" id="input_14" name="q14_serves" style="width:100%"
                                data-type="input-textbox" class="form-textbox validate[required, Numeric]"
                                data-defaultvalue="" size="20" value="" data-component="textbox"
                                aria-labelledby="label_14" required="">
                        </div>
                    </div>
                </div>
            </li>
            <li class="form-line" data-type="control_textarea" id="id_16">
                <label class="form-label form-label-left form-label-auto" id="label_16" for="input_16"> Nutrition
                    Detail(s)
                </label>
                <div id="cid_16" class="form-input">
                    <textarea id="input_16" class="form-textarea custom-hint-group form-custom-hint"
                        name="q16_nutritionDetails16" cols="40" rows="6" data-component="textarea"
                        aria-labelledby="label_16" data-customhint="comma separated or one per line" customhinted="true"
                        placeholder="comma separated or one per line" spellcheck="false"></textarea>
                </div>
            </li>
            <li class="form-line jf-required" data-type="control_textbox" id="id_17">
                <div class="twoColCont" style="display: flex; width:100%; gap:3em">
                    <div style="width:50%;">
                        <label class="form-label form-label-left form-label-auto" id="label_17" for="input_17">
                            Cuisine
                            <span class="form-required">
                                *
                            </span>
                        </label>
                        <div id="cid_17" class="form-input jf-required">
                            <input type="text" style="width: 100%;" id="input_17" name="q17_cuisine"
                                data-type="input-textbox" class="form-textbox validate[required]" data-defaultvalue=""
                                size="20" value="" data-component="textbox" aria-labelledby="label_17" required="">
                        </div>
                    </div>
                    <div style="width:50%;">
                        <label class="form-label form-label-left form-label-auto" id="label_23" for="input_23">
                            Course
                            <span class="form-required">
                                *
                            </span>
                        </label>
                        <div id="cid_23" class="form-input jf-required">
                            <select style="width: 100%;" class="form-dropdown  validate[required]" id="input_23"
                                name="q23_course23" data-component="dropdown" required="">
                                <option value=""> Select an option</option>
                                <option value="Breakfast"> Breakfast </option>
                                <option value="Lunch"> Lunch </option>
                                <option value="Snacks"> Snacks </option>
                                <option value="Dinner"> Dinner </option>
                                <option value="Appetiser"> Appetiser </option>
                                <option value=""> </option>
                            </select>
                        </div>
                    </div>
                </div>

            </li>
            <li class="form-line" data-type="control_textarea" id="id_19">
                <label class="form-label form-label-left form-label-auto" id="label_19" for="input_19"> Total
                    ingredient(s)
                </label>
                <div id="cid_19" class="form-input">
                    <textarea id="input_19" class="form-textarea custom-hint-group form-custom-hint"
                        name="q19_nutritionDetails" cols="40" rows="6" data-component="textarea"
                        aria-labelledby="label_19" data-customhint="comma separated or one per line" customhinted="true"
                        placeholder="comma separated or one per line" spellcheck="false"></textarea>
                </div>
            </li>
            <li class="form-line" data-type="control_textarea" id="id_20">
                <label class="form-label form-label-left form-label-auto" id="label_20" for="input_20"> Preparation
                    step(s)
                </label>
                <div id="cid_20" class="form-input">
                    <textarea id="input_20" class="form-textarea custom-hint-group form-custom-hint"
                        name="q20_preparationSteps" cols="40" rows="6" data-component="textarea"
                        aria-labelledby="label_20" data-customhint="comma separated or one per line" customhinted="true"
                        placeholder="comma separated or one per line" spellcheck="false"></textarea>
                </div>
            </li>
            <li class="form-line" data-type="control_button" id="id_2">
                <div id="cid_2" class="form-input-wide">
                    <div style="text-align:center" data-align="center"
                        class="form-buttons-wrapper form-buttons-center jsTest-button-wrapperField">
                        <button type="submit" class="form-submit-button">Post</button>
                    </div>
                </div>
            </li>
            <li style="display:none">
                Should be Empty:
                <input type="text" name="website" value="">
            </li>
        </ul>
    </div>
</div>
{{> footer}}

<script>
    $(document).ready(() => {
        $('#input_9').val('Quick Beef Stroganoff');
        $('#input_11').val("Olive oil \nLarge onion \nGarlic cloves \nBeef stock cube \nSweet smoked paprika \nTomato purée \nTin beef consommé \nChestnut mushrooms \nDijon mustard \nSteaks \nOlive oil spray \nCornichons \nCrème fraîche \nParsley \nDried onion \nSea salt \nBlack pepper");
        $('#input_12').val("https://ichef.bbci.co.uk/food/ic/food_16x9_1600/recipes/beef_stroganoff_16029_16x9.jpg \nhttps://easyweeknightrecipes.com/wp-content/uploads/2021/12/Beef-Stroganoff-6.jpg \nhttps://easyweeknightrecipes.com/wp-content/uploads/2021/12/Beef-Stroganoff-1.jpg");
        $('#input_13').val("30");
        $('#input_14').val("2");
        $('#input_10').val("Tom Kerridge");
        $('#input_16').val("795 kcal (505 kcal without rice), 59g protein, 87g carbohydrates (of which 18g sugars), 18g fat (of which 7.5g saturates), 18g fibre, 4.5g salt");
        $('#input_17').val("American");
        $('#input_23').val("Lunch");
        $('#input_19').val("½ tbsp light olive oil \n1 large onion, finely sliced \n3 garlic cloves, finely chopped \n1 beef stock cube \n2 tsp sweet smoked paprika \n1 tbsp tomato purée \n400g tin beef consommé (or beef stock) \n150g/5½oz chestnut mushrooms, thinly sliced \n1 tbsp Dijon mustard \n2 rump steaks (175g/6oz each), visible fat trimmed \nolive oil spray \n60g/2¼oz cornichons or small gherkins, sliced \n75ml/2½fl oz half-fat crème fraîche \n2 tbsp finely chopped flatleaf parsley \n2 tbsp roughly chopped chervil or parsley \n2 tbsp dried onion flakes \nsea salt and freshly ground black pepper");
        $('#input_45').val("This classic creamy beef stroganoff recipe is made with mushrooms, smoked paprika, and slices of pan-fried rump steak. It is also still filling without the rice, should you want to reduce the calorie count.");
        $('#input_20').val("Heat the light olive oil in a large frying pan over a low–medium heat. Add the onion and cook gently for 10 minutes, or until softened and starting to caramelise. \nStir in the garlic and cook gently for 2 minutes. Crumble in the stock cube and stir in the paprika and tomato purée. Cook, stirring, for 2 minutes. Add the beef consommé, mushrooms and mustard. Bring to the boil then lower the heat and simmer for 10–15 minutes, or until the volume of liquid has reduced by half. \nMeanwhile, place a griddle pan over a high heat. Bash the steaks between two sheets of cling film, until about 5mm/¼in thick. Spray each side with six sprays of oil and season with salt and pepper. When the griddle is smoking hot, add the steaks and cook for 1 minute on each side. Remove and set aside to rest. \nOnce the sauce has reduced, remove from the heat and stir through the cornichons, crème fraîche, and most of the parsley and chervil (reserving some for garnishing). Stir in the juices from the resting meat and check the seasoning. Cut the meat into thick slices and stir into the sauce. \nMix together the dried onion flakes and reserved chopped parsley and chervil. Serve the stroganoff sprinkled with the onion and herb mix, with the rice on the side, if you like.");
    });
    $(document).on("click", '.form-submit-button', async (event) => {
        const data = JSON.stringify({
            name: $('#input_9').val(),
            ingredients: $('#input_11').val(),
            images: $('#input_12').val(),
            preparationTime: $('#input_13').val(),
            serves: $('#input_14').val(),
            author: $('#input_10').val(),
            nutrition: $('#input_16').val(),
            cuisine: $('#input_17').val(),
            course: $('#input_23').val(),
            totalIngredients: $('#input_19').val(),
            description: $('#input_45').val(),
            instructions: $('#input_20').val(),
        });
        event.preventDefault();
        $('div#qnawrapper').html('<div id="overlay">Please wait<img src="https://i.imgur.com/V6qAnhz.gif" class="loading_circle" alt="loading" /></div>');
        const url = '/postRecipe';
        try {
            const config = {
                method: 'POST',
                headers: {
                    'Content-type': 'application/json',
                },
                body: data,
            };
            const rawResponse = await fetch(url, config);
            const content = await rawResponse.json();
            if (content) {
                alert('Created new Recipe');
                $('#input_9').val("");
                $('#input_11').val("");
                $('#input_12').val("");
                $('#input_13').val("");
                $('#input_14').val("");
                $('#input_10').val("");
                $('#input_16').val("");
                $('#input_17').val("");
                $('#input_23').val("");
                $('#input_19').val("");
                $('#input_45').val("");
                $('#input_20').val("");
            }
        } catch (error) {
            console.error(error);
        }
    });
</script>